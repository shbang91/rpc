servo_dt: 0.00125

ip_address: "tcp://127.0.0.1:5557"

b_sim: true ## if false, all the "exp_" parameters are used
data_save_freq: 1

controller:
  exp_smoothing_command_duration: 0.1 ## this only used when b_sim: false

wbc:
  task:
    com_task:
      com_feedback_source: 0 # 0: com feedback / 1: dcm feedback
      com_height_target_source: 0 # 0: com height / 1: base height

      ## sim params
      weight : [40., 40., 60.]
      kp : [200., 200., 300.]
      kd : [15., 15., 20.]
      icp_weight : [20., 20., 20.] # only used when feedback source : 1
      icp_kp : [20., 20., 100.]
      icp_kd : [0., 0., 5.] # x, y will be ignored
      icp_ki : [0.1, 0.1, 0.1]
      time_constant : 5.

      ## exp params
      exp_weight : [20., 20., 20.]
      exp_kp : [200., 200., 200.]
      exp_kd : [10., 10., 5.]
      exp_icp_weight : [20., 20., 20.] # only used when feedback source : 1
      exp_icp_kp : [10., 10., 100.]
      exp_icp_kd : [0., 0., 5.] # x, y will be ignored
      exp_icp_ki : [0.1, 0.1, 0.1]
      exp_time_constant : 5.

    torso_ori_task:
      ## sim params
      weight : [20., 20., 2.]
      kp : [100., 100., 100.]
      kd : [10., 10., 10.]

      ## exp params
      exp_weight : [20., 20., 2.]
      exp_kp : [100., 100., 100.]
      exp_kd : [10., 10., 10.]

    upper_body_task:
      ## sim params
      ## l_shoulder_fe(0), l_shoulder_aa(1), l_shoulder_ie(2), l_elbow_fe(3), l_wrist_ps_(4),
      ## l_wrist_pitch(5), neck_pitch(6), r_shoulder_fe(7), r_shoulder_aa(8), r_shoulder_ie(9),
      ## r_shoulder_ie(10), r_elbow_fe(11), r_wrist_ps(12), r_wrist_pitch(13)
      weight : [20., 20., 20., 20., 20., 20., 20., 20., 20., 20., 20., 20., 20.]
      kp : [100., 100., 100., 50., 40., 40., 100., 100., 100., 100., 50., 40., 40.]
      kd : [8., 8., 8., 3., 2., 2., 10., 8., 8., 8., 3., 2., 2.]

      ## exp params
      exp_weight : [20., 20., 20., 20., 20., 20., 20., 20., 20., 20., 20., 20., 20.]
      exp_kp : [10., 10., 10., 7., 5., 5., 5., 10., 10., 10., 7., 5., 5.]
      exp_kd : [0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.]

    foot_pos_task:
      ## sim params
      weight : [500, 500, 500]
      weight_at_swing : [500., 500., 500.]
      kp : [1000., 1000., 1000.]
      kd : [100., 100., 100.]

      ## exp params
      exp_weight : [80, 100, 100]
      exp_weight_at_swing : [100., 100., 100.]
      exp_kp : [500., 500., 500.]
      exp_kd : [20., 20., 20.]

    foot_ori_task:
      ## sim params
      weight : [500, 500, 500]
      weight_at_swing : [500., 500., 500.]
      kp : [1000., 1000., 1000.]
      kd : [100., 100., 100.]

      ## exp params
      exp_weight : [40., 40., 40.]
      exp_weight_at_swing : [20., 20., 20.]
      exp_kp : [20., 20., 20.]
      exp_kd : [1., 1., 1.]

    foot_rf_task:
      weight_at_contact: [0., 0., 0., 0., 0., 0.] ## trq, force order
      # weight_at_swing: [0., 0., 0., 0., 0., 0.] ## trq, force order
      weight_at_swing: [0.001, 0.001, 0.001, 0.001, 0.001, 0.001] ## trq, force order

      exp_weight_at_contact: [0., 0., 0., 0., 0., 0.]
      exp_weight_at_swing: [0., 0., 0., 0., 0., 0.]

  contact:
    ## sim params
    mu: 0.5
    max_rf_z: 1000.
    foot_half_length: 0.08
    foot_half_width: 0.04

    ## exp params
    exp_mu: 0.3
    exp_max_rf_z: 1000.
    exp_foot_half_length: 0.11
    exp_foot_half_width: 0.04

  qp:
    lambda_qddot: 1e-7 ##regularization
    lambda_rf: 1e-6 ##regularization
    b_trq_limit: false

state_machine:
    initialize:
      init_duration: 4.
      target_joint_pos: [0., 0., -0.785, 0.785, 0.785, -0.785, 0., 0., 0.523, 0., -1.57, 0., 0., 0., 0., 0., -0.785, 0.785, 0.785, -0.785, 0., 0., -0.523, 0., -1.57, 0., 0.] #pinocchio robotsystem joint order

    stand_up:
      standup_duration: 1.
      target_com_height: 0.6
      target_base_height: 0.9

      rf_z_max_interp_duration: 0.1

    com_swaying:
      amplitude: [0., 0.05, 0.] # [m]
      frequency: [0., 0.7, 0.] # [hz]
      #amplitude: [0., 0., 0.03] # [m]
      #frequency: [0., 0., 1.] # [hz]

dcm_walking:
  com_height: 0.6 #same as the target_com_height in stand_up?
  t_additional_init_trans: 0.
  t_contact_trans: 0.45
  t_swing: 0.55
  percentage_settle: 0.9
  alpha_ds: 0.5

  nominal_footwidth: 0.2
  nominal_forward_step: 0.1
  nominal_backward_step: -0.1
  nominal_turn_radians: 0.3
  nominal_strafe_distance: 0.02
  n_steps: 5

lmpc_walking:

  ##dcm related params
  com_height: 0.7 #same as the target_com_height in stand_up?
  t_additional_init_trans: 0.
  t_contact_trans: 0.45
  t_swing: 0.55
  percentage_settle: 0.9
  alpha_ds: 0.5

  ##footstep related params
  nominal_footwidth: 0.2
  nominal_forward_step: 0.1
  nominal_backward_step: -0.1
  nominal_turn_radians: 0.3
  nominal_strafe_distance: 0.02
  n_steps: 1

nmpc_walking:
  com_height: 0.6
  t_double_support: 0.1
  t_single_support: 0.4
  nominal_footwidth: 0.2
  nominal_forward_step: 0.2
  nominal_backward_step: 0.1
  nominal_turn_radians: 0.3
  nominal_strafe_distance: 0.02
  n_steps: 5



